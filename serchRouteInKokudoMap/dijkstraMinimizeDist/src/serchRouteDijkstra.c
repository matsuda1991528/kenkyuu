#include<stdio.h>#include<stdlib.h>#include<string.h>#include<math.h>#include"header.h"#define TRUE 1#define FALSE 0/* 2点間の距離を計算する関数 */static double getDist(struct xy_coord_t p1, struct xy_coord_t p2){	return sqrt((p2.x - p1.x) * (p2.x - p1.x) + (p2.y - p1.y) * (p2.y - p1.y));}void serchRouteDijkstra(struct vertex_t* vertex, int node_size, int start, int goal){	double dist[node_size], min_dist = INF;	int flag[node_size];	int i, j, p, index_num = 0;	int prev[node_size];	double temp_dist;		/* 距離配列と探索配列の初期化 */	for(i=1;i<node_size;i++){		dist[i] = INF;		flag[i] = FALSE;		prev[i] = EMPTY;		vertex[i].adj_list_p = vertex[i].adj_list_head;	}		/* 始点ノードまでのコストは0 */	dist[start] = 0.0f;		for(i=1;i<node_size;i++){		min_dist = INF;		/* 最小節点の探索 */				for(j=1;j<node_size;j++){			if(dist[j] != INF){				if(flag[j] == FALSE && dist[j] < min_dist){					index_num = j;					min_dist = dist[j];				}			}		}		/* 最小距離の節点に確定フラグを立てる */		flag[index_num] = TRUE;				/* start->goalが連結していない場合のエラー */		if(min_dist == INF){			printf("cannnot arrival goal\n");			printf(" i = %d\n", i);			printf("%d -> %d\n" ,start, goal);			exit(1);		}		while(vertex[index_num].adj_list_p != NULL){			/* 探索点から各節点への距離を計算 */			temp_dist = getDist(vertex[index_num].node.pos, vertex[vertex[index_num].adj_list_p->num].node.pos); 			//printf("%d -> %d : %f\n", vertex[index_num].node.num, vertex[vertex[index_num].adj_list_p->num].node.num, temp_dist);			/* 今までの節点の最小距離より低いならば，最小距離の更新 */			if(dist[index_num] +  temp_dist < dist[vertex[index_num].adj_list_p->num] ){				dist[vertex[index_num].adj_list_p->num] = dist[index_num] + temp_dist;				prev[vertex[index_num].adj_list_p->num] = index_num;			}			vertex[index_num].adj_list_p = vertex[index_num].adj_list_p->next;		}		vertex[index_num].adj_list_p = vertex[index_num].adj_list_head;		if(index_num == goal)			break;	}	//printf("dist = %f\n", dist[goal]);	p = goal;	while(prev[p] != EMPTY){		printf("%f %f\n", vertex[prev[p]].node.pos.x, vertex[prev[p]].node.pos.y);		//printf("<--%d", prev[p]);		p = prev[p];	}			return;}